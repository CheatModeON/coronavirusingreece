<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8"/>
  <title>Ενημέρωση Ελλήνων πολιτών για τον κορονοϊό (COVID-19)</title>
  <meta name="author" content="Achilleas Papakonstantinou" />
  <meta name="description" content="Live updates on coronavirus (COVID-19) outbreak" />
  <meta name="keywords" content="coronavirus, covid19, greece, coronavirusingreece, outbreak, pandemic, greek, daily, updates, info, information, infographics, statistics, scientific, analysis, cases, deaths, recovered, critical, percentage, prognosis, forecasting, κορονοϊός, πανδημία, 2020, εξελίξεις, νέα, ειδήσεις, χρήσιμες, πληροφορίες, στατιστικά, ανάλυση, καθημερινά, καθημερινή, πληροφόροηση, επιστημονικά, επιστημονική, νεκροί, θάνατοι, αναρρώσαντες, κρίσιμα, ποσοστά, προγνωστικά, μένουμε_σπίτι, alive, connected, covid, culture, online, open, staying, έχει, αγγλικούς, αμερική, αναγκαία, αναρρώσαντες, αναρρώσει, ανρθώπους, αποστασιοποίηση, ασία, αυτή, αυτούς, αφήγηση, αφρική, βάση, γιατί, γονέων, δεδομένων, δημιουργήθηκε, διαγράμματα, διαγραμματα, διεύθυνση, δυνατή, δωρεάν, δωρεαν, είναι, εθνικη, ελλάδα, ελλάδας, ελλήνων, ελλαδα, ενημέρωση, ενημερώνεται, ευρώπη, ηλεκτρονική, ημερήσια, ημερησια, θανόντες, θεατρικές, θεατρο, ιστότοπος, κίνηση, καθημερινά, κατοικίας, κενό, κινηματογραφος, κοινωνική, κορονοϊο, κορονοϊό, κρουσμάτων, κρούσματα, λονδίνο, μένω, μέσα, μέτρα, μέχρι, μετάβαση, μετρα, μουσείο, ντοκιμαντέρ, ονοματεπώνυμο, παγκόσμιος, παρίσι, παραμυθια, παραστάσεις, παραστασεις, πεθάνει, πολιτών, πολλές, προληψης, προσβληθεί, πρόληψης, σήμερα, σπίτι, σπιτι, στην, στις, στους, στόχο, σχετικά, σχετικα, ταινίες, ταινιες, τους, τωρα, υπότιτλους, φορτώνεται, χάρτης, ψηφιακο, ψηφιακό, ψυχιατρική, ωκεανία, όπου" />
  <meta name="google-site-verification" content="ujpdXepwcjwWfhs18QZaqRgZl4Uuv2rDaotW4CfdhQo" />
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <link rel="stylesheet" href="/assets/jquery-jvectormap-2.0.5.css" type="text/css" media="screen"/>
  <link rel="stylesheet" href="/assets/style.css" type="text/css">
  <script src="/assets/jquery-1.8.2.js"></script>
  <script src="/assets/jquery-jvectormap-2.0.5.min.js"></script>
  <script src="/assets/jquery-jvectormap-world-mill-en.js"></script>

  <script src="/assets/dataformat.js" type="text/javascript"></script>
  <script language="javascript" type="text/javascript" src="https://cdn.jsdelivr.net/npm/p5@1.0.0/lib/p5.js"></script>
  <script type="text/javascript" src="/assets/maps/jquery.vmap.greece2.js" charset="utf-8"></script>
  <script type="text/javascript" src="/assets/jquery-jvectormap-world-merc.js" charset="utf-8"></script>

  <script src="/assets/jquery-csv.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Alegreya+Sans|Open+Sans|Open+Sans+Condensed:300&display=swap" rel="stylesheet">
  <script src='/assets/plotly-latest.min.js'></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-42135511-3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-42135511-3');
  </script>
</head>
<!-- <body onload="begin()" style="margin:0;"> -->
<body onload="" style="margin:0;">
  <script>
      //var myVar;
      var first_time=1;

      function begin() {
        if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {
          window.location.replace("http://www.coronavirusingreece.eu/m/");
        }

        if(navigator.userAgent.toLowerCase().indexOf('firefox') > -1 && first_time == 1){
            alert("Ο Firefox δεν υποστηρίζεται.");
            first_time = 0;
        }


        var buttons = document.getElementsByClassName("tablinks");
        for (i = 0; i < buttons.length; i++) {
            buttons[i].disabled = true;
        }
      }

    </script>

    <div class='page-container'>
      <div class="tab">
        <div id="text" style="text-align: center;">
          <img src="../logo.png" alt="" style="width:60%; opacity: 0.7;">
        </div>
        <a id="home" class="tablinks" href="index.html">Ψηφιακό Σπίτι</a>
        <a id="all-map" class="tablinks" href="worldmap.html">Παγκόσμιος Χάρτης COVID-19</a>
        <a id="gr-map" class="tablinks" href="greekmap.html">Χάρτης Ελλάδας COVID-19</a>
        <a id="the-plots" class="tablinks active" href="dailyplots.html">Ημερήσια διαγράμματα</a>
        <a id="gr-data" class="tablinks" href="greekdata.html">Ελλάδα ΤΩΡΑ</a>
        <a id="gen-info"class="tablinks" href="info.html">Μέτρα πρόληψης</a>
        <a id="coronavirus-info"class="tablinks" href="coronavirus.html">Σχετικά με τον Κορονοϊό</a>
        <a id="social-distance"class="tablinks" href="socialdistancing.html">Γιατί μένω μέσα;</a>
      </div>

      <div id="contentDiv" class="animate-bottom">

        <div id="load">
          <div id="loader_text" style="text-align: center;">
            Φορτώνεται ο παγκόσμιος χάρτης <br>και η βάση δεδομένων κρουσμάτων με COVID-19
          </div>
          <div id="loader"></div>
        </div>

        <div id="contentDiv" class="animate-bottom">

            <div id="daily-plots" class="tabcontent" style="text-align: center;">
                <div id="info-img"></div>
                <div class="bg-text">ΗΜΕΡΗΣΙΑ ΔΙΑΓΡΑΜΜΑΤΑ</div>

                  <div id="greeceTrend"></div>

                  <div id="compPlot4" style="width: 100%"></div>
                  <br>
                  <div id="compPlot5"></div>
                  <br>
                  <div id="plot3"></div>
                  <br>
                  <div id="cont-data" style="display:none;">
                    <div class="grid-container">
                      <div>
                        <h1>Ευρώπη</h1>
                        Μέχρι σήμερα 1 στους <span id="a1"></span> ανρθώπους έχει προσβληθεί από τον κορονοϊό.<br>
                        Από αυτούς 1 στους <span id="b1"></span> ανρθώπους έχει αναρρώσει.<br>
                        Από αυτούς 1 στους <span id="c1"></span> ανρθώπους έχει πεθάνει.<br>
                      </div>
                      <div>
                        <h1>Ασία</h1>
                        Μέχρι σήμερα 1 στους <span id="a2"></span> ανρθώπους έχει προσβληθεί από τον κορονοϊό.<br>
                        Από αυτούς 1 στους <span id="b2"></span> ανρθώπους έχει αναρρώσει.<br>
                        Από αυτούς 1 στους <span id="c2"></span> ανρθώπους έχει πεθάνει.<br>
                      </div>
                      <div>
                        <h1>Αφρική</h1>
                        Μέχρι σήμερα 1 στους <span id="a3"></span> ανρθώπους έχει προσβληθεί από τον κορονοϊό.<br>
                        Από αυτούς 1 στους <span id="b3"></span> ανρθώπους έχει αναρρώσει.<br>
                        Από αυτούς 1 στους <span id="c3"></span> ανρθώπους έχει πεθάνει.<br>
                      </div>
                      <div>
                        <h1>Β. Αμερική</h1>
                        Μέχρι σήμερα 1 στους <span id="a4"></span> ανρθώπους έχει προσβληθεί από τον κορονοϊό.<br>
                        Από αυτούς 1 στους <span id="b4"></span> ανρθώπους έχει αναρρώσει.<br>
                        Από αυτούς 1 στους <span id="c4"></span> ανρθώπους έχει πεθάνει.<br>
                      </div>
                      <div>
                        <h1>Ν. Αμερική</h1>
                        Μέχρι σήμερα 1 στους <span id="a5"></span> ανρθώπους έχει προσβληθεί από τον κορονοϊό.<br>
                        Από αυτούς 1 στους <span id="b5"></span> ανρθώπους έχει αναρρώσει.<br>
                        Από αυτούς 1 στους <span id="c5"></span> ανρθώπους έχει πεθάνει.<br>
                      </div>
                      <div>
                        <h1>Ωκεανία</h1>
                        Μέχρι σήμερα 1 στους <span id="a6"></span> ανρθώπους έχει προσβληθεί από τον κορονοϊό.<br>
                        Από αυτούς 1 στους <span id="b6"></span> ανρθώπους έχει αναρρώσει.<br>
                        Από αυτούς 1 στους <span id="c6"></span> ανρθώπους έχει πεθάνει.<br>
                      </div>
                    </div>
                  </div>
                  <br>
                  <div id="bar1"></div>
                  <br>
                  <div id="pie1"></div>
                  <br>
                  <div id="plot_tests"></div>
            </div>

        </div>
      </div>
    </div>


  <div class="footer">
      <p id="footer-text">All rights reserved Achilleas Papakonstantinou. <a href="https://github.com/CheatModeON/">Github</a>, <a href="http://worldometers.info/coronavirus/">Data source</a>, <a href="http://coron-api.azurewebsites.net/api/v1/docs/">Coronavirus API</a></p>
  </div>

  <div id="navigation" class="overlay">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
    <div class="overlay-content">
      <a href="index.html">HOME</a>
      <a href="worldmap.html">WORLD</a>
      <a href="greekmap.html">GREECE</a>
      <a href="greekdata.html">GREEK DATA</a>
      <a href="dailyplots.html">DAILY PLOTS</a>
      <a href="info.html">INFO</a>
      <a href="coronavirus.html">CORONAVIRUS</a>
      <a href="socialdistancing.html">SOCIAL DISTANCING</a>
    </div>
  </div>

  <script>
  function openNav() {
    document.getElementById("navigation").style.width = "100%";
  }

  function closeNav() {
    document.getElementById("navigation").style.width = "0%";
  }
  </script>

  <div id="navBtn">
    <span style="color:white;position:absolute; transform: translate(-50%,-50%); left:50%; top:50%; font-size:22px; text-align:center;" onclick="openNav()">&#9776;</span>
  </div>

  <script src="/assets/js/main.js"></script>
  <script>

  var continentalData = {
    "North America": {"total_cases":-99999, "new_cases":-99999, "new_deaths":-99999, "active_cases":-99999, "serious_cases":-99999, "total_deaths":-99999, "total_recovered":-99999, "total_cases_per_mil":-99999, "deaths_per_mil":-99999, "total_tests":-99999,"tests_per_mil":-99999},
    "Europe": {"total_cases":-99999, "new_cases":-99999, "new_deaths":-99999, "active_cases":-99999, "serious_cases":-99999, "total_deaths":-99999, "total_recovered":-99999, "total_cases_per_mil":-99999, "deaths_per_mil":-99999, "total_tests":-99999,"tests_per_mil":-99999},
    "Asia": {"total_cases":-99999, "new_cases":-99999, "new_deaths":-99999, "active_cases":-99999, "serious_cases":-99999, "total_deaths":-99999, "total_recovered":-99999, "total_cases_per_mil":-99999, "deaths_per_mil":-99999, "total_tests":-99999,"tests_per_mil":-99999},
    "South America": {"total_cases":-99999, "new_cases":-99999, "new_deaths":-99999, "active_cases":-99999, "serious_cases":-99999, "total_deaths":-99999, "total_recovered":-99999, "total_cases_per_mil":-99999, "deaths_per_mil":-99999, "total_tests":-99999,"tests_per_mil":-99999},
    "Oceania": {"total_cases":-99999, "new_cases":-99999, "new_deaths":-99999, "active_cases":-99999, "serious_cases":-99999, "total_deaths":-99999, "total_recovered":-99999, "total_cases_per_mil":-99999, "deaths_per_mil":-99999, "total_tests":-99999,"tests_per_mil":-99999},
    "Africa": {"total_cases":-99999, "new_cases":-99999, "new_deaths":-99999, "active_cases":-99999, "serious_cases":-99999, "total_deaths":-99999, "total_recovered":-99999, "total_cases_per_mil":-99999, "deaths_per_mil":-99999, "total_tests":-99999,"tests_per_mil":-99999}
  };

  $.getJSON( "https://coron-api.herokuapp.com/api/v2/continents").success(function( data ) {
    //var items = [];
    data.forEach(function(item, index, array) {
      $.each( item, function( key, val ) {
         if(key=="continent") {
           if(val=="North America") {
             continentalData["North America"].total_cases = parseInt(item.total_cases);
             continentalData["North America"].new_cases = parseInt(item.new_case);
             continentalData["North America"].new_deaths = parseInt(item.new_deaths);
             continentalData["North America"].active_cases = parseInt(item.active_cases);
             continentalData["North America"].serious_cases = parseInt(item.serious_cases);
             continentalData["North America"].total_deaths = parseInt(item.total_deaths);
             continentalData["North America"].total_recovered = parseInt(item.total_recovered);
           }
           if(val=="Europe") {
             continentalData["Europe"].total_cases = parseInt(item.total_cases);
             continentalData["Europe"].new_cases = parseInt(item.new_cases);
             continentalData["Europe"].new_deaths = parseInt(item.new_deaths);
             continentalData["Europe"].active_cases = parseInt(item.active_cases);
             continentalData["Europe"].serious_cases = parseInt(item.serious_cases);
             continentalData["Europe"].total_deaths = parseInt(item.total_deaths);
             continentalData["Europe"].total_recovered = parseInt(item.total_recovered);
           }
           if(val=="Asia") {
             continentalData["Asia"].total_cases = parseInt(item.total_cases);
             continentalData["Asia"].new_cases = parseInt(item.new_cases);
             continentalData["Asia"].new_deaths = parseInt(item.new_deaths);
             continentalData["Asia"].active_cases = parseInt(item.active_cases);
             continentalData["Asia"].serious_cases = parseInt(item.serious_cases);
             continentalData["Asia"].total_deaths = parseInt(item.total_deaths);
             continentalData["Asia"].total_recovered = parseInt(item.total_recovered);
           }
           if(val=="South America") {
             continentalData["South America"].total_cases = parseInt(item.total_cases);
             continentalData["South America"].new_cases = parseInt(item.new_cases);
             continentalData["South America"].new_deaths = parseInt(item.new_deaths);
             continentalData["South America"].active_cases = parseInt(item.active_cases);
             continentalData["South America"].serious_cases = parseInt(item.serious_cases);
             continentalData["South America"].total_deaths = parseInt(item.total_deaths);
             continentalData["South America"].total_recovered = parseInt(item.total_recovered);
           }
           if(val=="Oceania") {
             continentalData["Oceania"].total_cases = parseInt(item.total_cases);
             continentalData["Oceania"].new_cases = parseInt(item.new_cases);
             continentalData["Oceania"].new_deaths = parseInt(item.new_deaths);
             continentalData["Oceania"].active_cases = parseInt(item.active_cases);
             continentalData["Oceania"].serious_cases = parseInt(item.serious_cases);
             continentalData["Oceania"].total_deaths = parseInt(item.total_deaths);
             continentalData["Oceania"].total_recovered = parseInt(item.total_recovered);
           }
           if(val=="Africa") {
             continentalData["Africa"].total_cases = parseInt(item.total_cases);
             continentalData["Africa"].new_cases = parseInt(item.new_cases);
             continentalData["Africa"].new_deaths = parseInt(item.new_deaths);
             continentalData["Africa"].active_cases = parseInt(item.active_cases);
             continentalData["Africa"].serious_cases = parseInt(item.serious_cases);
             continentalData["Africa"].total_deaths = parseInt(item.total_deaths);
             continentalData["Africa"].total_recovered = parseInt(item.total_recovered);
           }
         }
      });
    });
    $.getJSON( "https://coron-api.herokuapp.com/api/v1/stats", function( data ) {
      //var items = [];
      data.forEach(function(item, index, array) {
        $.each( item, function( key, val ) {
               if(item.active_cases=="No Data" || item.active_cases==""){
                  item.active_cases = 0;
               }
               if(item.serious_cases=="No Data" || item.serious_cases==""){
                  item.serious_cases = 0;
               }
               if(item.total_cases=="No Data" || item.total_cases==""){
                  item.total_cases = 0;
               }
               if(item.total_recovered=="No Data" || item.total_recovered==""){
                  item.total_recovered = 0;
               }
               if(item.total_deaths=="No Data" || item.total_deaths==""){
                  item.total_deaths = 0;
               }
               if(item.new_deaths=="No Data" || item.new_deaths==""){
                  item.new_deaths = 0;
               }
               if(item.new_cases=="No Data" || item.new_cases==""){
                  item.new_cases = 0;
               }
               if(item.total_cases_per_mil=="No Data" || item.total_cases_per_mil==""){
                  item.total_cases_per_mil = 0;
               }
               if(item.deaths_per_mil=="No Data" || item.deaths_per_mil==""){
                  item.deaths_per_mil = 0;
               }
               if(item.total_tests=="No Data" || item.total_tests==""){
                  item.total_tests = 0;
               }
               if(item.tests_per_mil=="No Data" || item.tests_per_mil==""){
                  item.tests_per_mil = 0;
               }
               if(key=="country"){
                   // if(val=="World"){
                   //     world.total_cases = item.total_cases;
                   //     world.new_cases = item.new_cases;
                   //     world.new_deaths = item.new_deaths;
                   //     world.active_cases = item.active_cases;
                   //     world.serious_cases = item.serious_cases;
                   //     world.total_deaths = item.total_deaths;
                   //     world.total_recovered = item.total_recovered;
                   //     world.total_cases_per_mil = item.total_cases_per_mil;
                   //     world.deaths_per_mil = item.deaths_per_mil;
                   //     world.total_tests = item.total_tests;
                   //     world.tests_per_mil = item.tests_per_mil;
                   // }
                   if(val=="Italy"){
                       virusData["IT"].total_cases = item.total_cases;
                       virusData["IT"].new_cases = item.new_cases;
                       virusData["IT"].new_deaths = item.new_deaths;
                       virusData["IT"].active_cases = item.active_cases;
                       virusData["IT"].serious_cases = item.serious_cases;
                       virusData["IT"].total_deaths = item.total_deaths;
                       virusData["IT"].total_recovered = item.total_recovered;
                       virusData["IT"].total_cases_per_mil = item.total_cases_per_mil;
                       virusData["IT"].deaths_per_mil = item.deaths_per_mil;
                       virusData["IT"].total_tests = item.total_tests;
                       virusData["IT"].tests_per_mil = item.tests_per_mil;
                   }
                   if(val=="Spain"){
                       virusData["ES"].total_cases = item.total_cases;
                       virusData["ES"].new_cases = item.new_cases;
                       virusData["ES"].new_deaths = item.new_deaths;
                       virusData["ES"].active_cases = item.active_cases;
                       virusData["ES"].serious_cases = item.serious_cases;
                       virusData["ES"].total_deaths = item.total_deaths;
                       virusData["ES"].total_recovered = item.total_recovered;
                       virusData["ES"].total_cases_per_mil = item.total_cases_per_mil;
                       virusData["ES"].deaths_per_mil = item.deaths_per_mil;
                       virusData["ES"].total_tests = item.total_tests;
                       virusData["ES"].tests_per_mil = item.tests_per_mil;
                   }
                   if(val=="Germany"){
                       virusData["DE"].total_cases = item.total_cases;
                       virusData["DE"].new_cases = item.new_cases;
                       virusData["DE"].new_deaths = item.new_deaths;
                       virusData["DE"].active_cases = item.active_cases;
                       virusData["DE"].serious_cases = item.serious_cases;
                       virusData["DE"].total_deaths = item.total_deaths;
                       virusData["DE"].total_recovered = item.total_recovered;
                       virusData["DE"].total_cases_per_mil = item.total_cases_per_mil;
                       virusData["DE"].deaths_per_mil = item.deaths_per_mil;
                       virusData["DE"].total_tests = item.total_tests;
                       virusData["DE"].tests_per_mil = item.tests_per_mil;
                   }
                   if(val=="USA"){
                       virusData["US"].total_cases = item.total_cases;
                       virusData["US"].new_cases = item.new_cases;
                       virusData["US"].new_deaths = item.new_deaths;
                       virusData["US"].active_cases = item.active_cases;
                       virusData["US"].serious_cases = item.serious_cases;
                       virusData["US"].total_deaths = item.total_deaths;
                       virusData["US"].total_recovered = item.total_recovered;
                       virusData["US"].total_cases_per_mil = item.total_cases_per_mil;
                       virusData["US"].deaths_per_mil = item.deaths_per_mil;
                       virusData["US"].total_tests = item.total_tests;
                       virusData["US"].tests_per_mil = item.tests_per_mil;
                   }
                   if(val=="France"){
                       virusData["FR"].total_cases = item.total_cases;
                       virusData["FR"].new_cases = item.new_cases;
                       virusData["FR"].new_deaths = item.new_deaths;
                       virusData["FR"].active_cases = item.active_cases;
                       virusData["FR"].serious_cases = item.serious_cases;
                       virusData["FR"].total_deaths = item.total_deaths;
                       virusData["FR"].total_recovered = item.total_recovered;
                       virusData["FR"].total_cases_per_mil = item.total_cases_per_mil;
                       virusData["FR"].deaths_per_mil = item.deaths_per_mil;
                       virusData["FR"].total_tests = item.total_tests;
                       virusData["FR"].tests_per_mil = item.tests_per_mil;
                   }
                   if(val=="Switzerland"){
                       virusData["CH"].total_cases = item.total_cases;
                       virusData["CH"].new_cases = item.new_cases;
                       virusData["CH"].new_deaths = item.new_deaths;
                       virusData["CH"].active_cases = item.active_cases;
                       virusData["CH"].serious_cases = item.serious_cases;
                       virusData["CH"].total_deaths = item.total_deaths;
                       virusData["CH"].total_recovered = item.total_recovered;
                       virusData["CH"].total_cases_per_mil = item.total_cases_per_mil;
                       virusData["CH"].deaths_per_mil = item.deaths_per_mil;
                       virusData["CH"].total_tests = item.total_tests;
                       virusData["CH"].tests_per_mil = item.tests_per_mil;
                   }
                   if(val=="UK"){
                       virusData["GB"].total_cases = item.total_cases;
                       virusData["GB"].new_cases = item.new_cases;
                       virusData["GB"].new_deaths = item.new_deaths;
                       virusData["GB"].active_cases = item.active_cases;
                       virusData["GB"].serious_cases = item.serious_cases;
                       virusData["GB"].total_deaths = item.total_deaths;
                       virusData["GB"].total_recovered = item.total_recovered;
                       virusData["GB"].total_cases_per_mil = item.total_cases_per_mil;
                       virusData["GB"].deaths_per_mil = item.deaths_per_mil;
                       virusData["GB"].total_tests = item.total_tests;
                       virusData["GB"].tests_per_mil = item.tests_per_mil;
                   }
                   if(val=="Netherlands"){
                       virusData["NL"].total_cases = item.total_cases;
                       virusData["NL"].new_cases = item.new_cases;
                       virusData["NL"].new_deaths = item.new_deaths;
                       virusData["NL"].active_cases = item.active_cases;
                       virusData["NL"].serious_cases = item.serious_cases;
                       virusData["NL"].total_deaths = item.total_deaths;
                       virusData["NL"].total_recovered = item.total_recovered;
                       virusData["NL"].total_cases_per_mil = item.total_cases_per_mil;
                       virusData["NL"].deaths_per_mil = item.deaths_per_mil;
                       virusData["NL"].total_tests = item.total_tests;
                       virusData["NL"].tests_per_mil = item.tests_per_mil;
                   }
                   if(val=="Austria"){
                       virusData["AT"].total_cases = item.total_cases;
                       virusData["AT"].new_cases = item.new_cases;
                       virusData["AT"].new_deaths = item.new_deaths;
                       virusData["AT"].active_cases = item.active_cases;
                       virusData["AT"].serious_cases = item.serious_cases;
                       virusData["AT"].total_deaths = item.total_deaths;
                       virusData["AT"].total_recovered = item.total_recovered;
                       virusData["AT"].total_cases_per_mil = item.total_cases_per_mil;
                       virusData["AT"].deaths_per_mil = item.deaths_per_mil;
                       virusData["AT"].total_tests = item.total_tests;
                       virusData["AT"].tests_per_mil = item.tests_per_mil;
                   }
                   if(val=="Norway"){
                       virusData["NO"].total_cases = item.total_cases;
                       virusData["NO"].new_cases = item.new_cases;
                       virusData["NO"].new_deaths = item.new_deaths;
                       virusData["NO"].active_cases = item.active_cases;
                       virusData["NO"].serious_cases = item.serious_cases;
                       virusData["NO"].total_deaths = item.total_deaths;
                       virusData["NO"].total_recovered = item.total_recovered;
                       virusData["NO"].total_cases_per_mil = item.total_cases_per_mil;
                       virusData["NO"].deaths_per_mil = item.deaths_per_mil;
                       virusData["NO"].total_tests = item.total_tests;
                       virusData["NO"].tests_per_mil = item.tests_per_mil;
                   }
                   if(val=="Belgium"){
                       virusData["BE"].total_cases = item.total_cases;
                       virusData["BE"].new_cases = item.new_cases;
                       virusData["BE"].new_deaths = item.new_deaths;
                       virusData["BE"].active_cases = item.active_cases;
                       virusData["BE"].serious_cases = item.serious_cases;
                       virusData["BE"].total_deaths = item.total_deaths;
                       virusData["BE"].total_recovered = item.total_recovered;
                       virusData["BE"].total_cases_per_mil = item.total_cases_per_mil;
                       virusData["BE"].deaths_per_mil = item.deaths_per_mil;
                       virusData["BE"].total_tests = item.total_tests;
                       virusData["BE"].tests_per_mil = item.tests_per_mil;
                   }
                   if(val=="Sweden"){
                       virusData["SE"].total_cases = item.total_cases;
                       virusData["SE"].new_cases = item.new_cases;
                       virusData["SE"].new_deaths = item.new_deaths;
                       virusData["SE"].active_cases = item.active_cases;
                       virusData["SE"].serious_cases = item.serious_cases;
                       virusData["SE"].total_deaths = item.total_deaths;
                       virusData["SE"].total_recovered = item.total_recovered;
                       virusData["SE"].total_cases_per_mil = item.total_cases_per_mil;
                       virusData["SE"].deaths_per_mil = item.deaths_per_mil;
                       virusData["SE"].total_tests = item.total_tests;
                       virusData["SE"].tests_per_mil = item.tests_per_mil;
                   }
                   if(val=="Denmark"){
                       virusData["DK"].total_cases = item.total_cases;
                       virusData["DK"].new_cases = item.new_cases;
                       virusData["DK"].new_deaths = item.new_deaths;
                       virusData["DK"].active_cases = item.active_cases;
                       virusData["DK"].serious_cases = item.serious_cases;
                       virusData["DK"].total_deaths = item.total_deaths;
                       virusData["DK"].total_recovered = item.total_recovered;
                       virusData["DK"].total_cases_per_mil = item.total_cases_per_mil;
                       virusData["DK"].deaths_per_mil = item.deaths_per_mil;
                       virusData["DK"].total_tests = item.total_tests;
                       virusData["DK"].tests_per_mil = item.tests_per_mil;
                   }
                   if(val=="Czechia"){
                       virusData["CZ"].total_cases = item.total_cases;
                       virusData["CZ"].new_cases = item.new_cases;
                       virusData["CZ"].new_deaths = item.new_deaths;
                       virusData["CZ"].active_cases = item.active_cases;
                       virusData["CZ"].serious_cases = item.serious_cases;
                       virusData["CZ"].total_deaths = item.total_deaths;
                       virusData["CZ"].total_recovered = item.total_recovered;
                       virusData["CZ"].total_cases_per_mil = item.total_cases_per_mil;
                       virusData["CZ"].deaths_per_mil = item.deaths_per_mil;
                       virusData["CZ"].total_tests = item.total_tests;
                       virusData["CZ"].tests_per_mil = item.tests_per_mil;
                   }
                   if(val=="Israel"){
                       virusData["IL"].total_cases = item.total_cases;
                       virusData["IL"].new_cases = item.new_cases;
                       virusData["IL"].new_deaths = item.new_deaths;
                       virusData["IL"].active_cases = item.active_cases;
                       virusData["IL"].serious_cases = item.serious_cases;
                       virusData["IL"].total_deaths = item.total_deaths;
                       virusData["IL"].total_recovered = item.total_recovered;
                       virusData["IL"].total_cases_per_mil = item.total_cases_per_mil;
                       virusData["IL"].deaths_per_mil = item.deaths_per_mil;
                       virusData["IL"].total_tests = item.total_tests;
                       virusData["IL"].tests_per_mil = item.tests_per_mil;
                   }
                   if(val=="Greece"){
                       virusData["GR"].total_cases = item.total_cases;
                       virusData["GR"].new_cases = item.new_cases;
                       virusData["GR"].new_deaths = item.new_deaths;
                       virusData["GR"].active_cases = item.active_cases;
                       virusData["GR"].serious_cases = item.serious_cases;
                       virusData["GR"].total_deaths = item.total_deaths;
                       virusData["GR"].total_recovered = item.total_recovered;
                       virusData["GR"].total_cases_per_mil = item.total_cases_per_mil;
                       virusData["GR"].deaths_per_mil = item.deaths_per_mil;
                       virusData["GR"].total_tests = item.total_tests;
                       virusData["GR"].tests_per_mil = item.tests_per_mil;
                   }
                   if(val=="Poland"){
                       virusData["PL"].total_cases = item.total_cases;
                       virusData["PL"].new_cases = item.new_cases;
                       virusData["PL"].new_deaths = item.new_deaths;
                       virusData["PL"].active_cases = item.active_cases;
                       virusData["PL"].serious_cases = item.serious_cases;
                       virusData["PL"].total_deaths = item.total_deaths;
                       virusData["PL"].total_recovered = item.total_recovered;
                       virusData["PL"].total_cases_per_mil = item.total_cases_per_mil;
                       virusData["PL"].deaths_per_mil = item.deaths_per_mil;
                       virusData["PL"].total_tests = item.total_tests;
                       virusData["PL"].tests_per_mil = item.tests_per_mil;
                   }
                   if(val=="Slovenia"){
                       virusData["SI"].total_cases = item.total_cases;
                       virusData["SI"].new_cases = item.new_cases;
                       virusData["SI"].new_deaths = item.new_deaths;
                       virusData["SI"].active_cases = item.active_cases;
                       virusData["SI"].serious_cases = item.serious_cases;
                       virusData["SI"].total_deaths = item.total_deaths;
                       virusData["SI"].total_recovered = item.total_recovered;
                       virusData["SI"].total_cases_per_mil = item.total_cases_per_mil;
                       virusData["SI"].deaths_per_mil = item.deaths_per_mil;
                       virusData["SI"].total_tests = item.total_tests;
                       virusData["SI"].tests_per_mil = item.tests_per_mil;
                   }
                   if(val=="Romania"){
                       virusData["RO"].total_cases = item.total_cases;
                       virusData["RO"].new_cases = item.new_cases;
                       virusData["RO"].new_deaths = item.new_deaths;
                       virusData["RO"].active_cases = item.active_cases;
                       virusData["RO"].serious_cases = item.serious_cases;
                       virusData["RO"].total_deaths = item.total_deaths;
                       virusData["RO"].total_recovered = item.total_recovered;
                       virusData["RO"].total_cases_per_mil = item.total_cases_per_mil;
                       virusData["RO"].deaths_per_mil = item.deaths_per_mil;
                       virusData["RO"].total_tests = item.total_tests;
                       virusData["RO"].tests_per_mil = item.tests_per_mil;
                   }
                   if(val=="Russia"){
                       virusData["RU"].total_cases = item.total_cases;
                       virusData["RU"].new_cases = item.new_cases;
                       virusData["RU"].new_deaths = item.new_deaths;
                       virusData["RU"].active_cases = item.active_cases;
                       virusData["RU"].serious_cases = item.serious_cases;
                       virusData["RU"].total_deaths = item.total_deaths;
                       virusData["RU"].total_recovered = item.total_recovered;
                       virusData["RU"].total_cases_per_mil = item.total_cases_per_mil;
                       virusData["RU"].deaths_per_mil = item.deaths_per_mil;
                       virusData["RU"].total_tests = item.total_tests;
                       virusData["RU"].tests_per_mil = item.tests_per_mil;
                   }
                   if(val=="Ukraine"){
                       virusData["UA"].total_cases = item.total_cases;
                       virusData["UA"].new_cases = item.new_cases;
                       virusData["UA"].new_deaths = item.new_deaths;
                       virusData["UA"].active_cases = item.active_cases;
                       virusData["UA"].serious_cases = item.serious_cases;
                       virusData["UA"].total_deaths = item.total_deaths;
                       virusData["UA"].total_recovered = item.total_recovered;
                       virusData["UA"].total_cases_per_mil = item.total_cases_per_mil;
                       virusData["UA"].deaths_per_mil = item.deaths_per_mil;
                       virusData["UA"].total_tests = item.total_tests;
                       virusData["UA"].tests_per_mil = item.tests_per_mil;
                   }

               }

        });
      });

      createPlots();
    });

  });


    var x_cases=[];
    var y_cases=[];
    var x_hospitalized=[];
    var y_hospitalized=[];
    var x_deaths=[];
    var y_deaths=[];
    var x_recovered=[];
    var y_recovered=[];
    var x_total=[];
    var y_total=[];
    var y_total_deaths=[0];
    var growth_total=[0];
    var growth_cases=[0];
    var growth_deaths=[0];
    function createPlots() {
      var greek_pop = (virusData["GR"].total_cases*1000000) / virusData["GR"].total_cases_per_mil; //10423054;
      var usa_pop = (virusData["US"].total_cases*1000000) / virusData["US"].total_cases_per_mil; //331002651;
      var germ_pop = (virusData["DE"].total_cases*1000000) / virusData["DE"].total_cases_per_mil; //83783942;
      var spain_pop = (virusData["ES"].total_cases*1000000) / virusData["ES"].total_cases_per_mil; //46754778;
      var italy_pop = (virusData["IT"].total_cases*1000000) / virusData["IT"].total_cases_per_mil; //60461826;
      var france_pop = (virusData["FR"].total_cases*1000000) / virusData["FR"].total_cases_per_mil; //65273511;
      var uk_pop = (virusData["GB"].total_cases*1000000) / virusData["GB"].total_cases_per_mil; //67886011;
      var russia_pop = (virusData["RU"].total_cases*1000000) / virusData["RU"].total_cases_per_mil; //145934462;
      var cz_pop = (virusData["CZ"].total_cases*1000000) / virusData["CZ"].total_cases_per_mil; //10708981;
      var romania_pop = (virusData["RO"].total_cases*1000000) / virusData["RO"].total_cases_per_mil; //19237691;
      var ukraine_pop = (virusData["UA"].total_cases*1000000) / virusData["UA"].total_cases_per_mil; //43733762;
      var poland_pop = (virusData["PL"].total_cases*1000000) / virusData["PL"].total_cases_per_mil; //37846611;

      var greece_expenditure = 2223;
      var usa_expenditure = 9892;
      var germany_expenditure = 5551;
      var italy_expenditure = 3391;
      var france_expenditure = 4600;
      var uk_expenditure = 4192;
      var russia_expenditure = 1329;
      var cz_expenditure = 2544;
      var romania_expenditure = 1152;
      var ukraine_expenditure = 2662;
      var poland_expenditure = 1798;

      var greece_ratio = (((virusData["GR"].total_deaths  / virusData["GR"].total_cases))) * 100;
      var usa_ratio = (((virusData["US"].total_deaths  / virusData["US"].total_cases ))) * 100;
      var germany_ratio = (((virusData["DE"].total_deaths  / virusData["DE"].total_cases ))) * 100;
      var spain_ratio = (virusData["ES"].total_deaths  / virusData["ES"].total_cases ) * 100;
      var italy_ratio = (((virusData["IT"].total_deaths  / virusData["IT"].total_cases ))) * 100;
      var france_ratio = (((virusData["FR"].total_deaths  / virusData["FR"].total_cases ))) * 100;
      var uk_ratio = (((virusData["GB"].total_deaths  / virusData["GB"].total_cases ))) * 100;
      var russia_ratio = (((virusData["RU"].total_deaths  / virusData["RU"].total_cases ))) * 100;
      var cz_ratio = (((virusData["CZ"].total_deaths  / virusData["CZ"].total_cases ))) * 100;
      var romania_ratio = (((virusData["RO"].total_deaths  / virusData["RO"].total_cases ))) * 100;
      var ukraine_ratio = (((virusData["UA"].total_deaths  / virusData["UA"].total_cases ))) * 100;
      var poland_ratio = (((virusData["PL"].total_deaths  / virusData["PL"].total_cases ))) * 100;

      var data = [
          {
            x: ['Ελλάδα','ΗΠΑ','Γερμανία','Ισπανία','Ιταλία','Γαλλία','Αγγλία','Ρωσία','Τσεχία','Ρουμανία','Ουκρανία','Πολωνία'],
            y: [greece_ratio,usa_ratio,germany_ratio,spain_ratio,italy_ratio,france_ratio,uk_ratio,russia_ratio,cz_ratio,romania_ratio,ukraine_ratio,poland_ratio],
            type: 'bar',
            text: [(greece_ratio).toFixed(1)+"%",(usa_ratio).toFixed(1)+"%",(germany_ratio).toFixed(1)+"%",(spain_ratio).toFixed(1)+"%",(italy_ratio).toFixed(1)+"%",(france_ratio).toFixed(1)+"%",(uk_ratio).toFixed(1)+"%",(russia_ratio).toFixed(1)+"%",(cz_ratio).toFixed(1)+"%",(romania_ratio).toFixed(1)+"%",(ukraine_ratio).toFixed(1)+"%",(poland_ratio).toFixed(1)+"%"].map(String),
            textposition: 'auto',
            hoverinfo: 'none'
          }

        ];
      var layout = {
            width: $("#contentDiv").innerWidth()-15,
            height: 400,
            margin: {
              l: 50,
              r: 50,
              b: 80,
              t: 100,
              pad: 4
            },
            title: {
              text: "Σύγκριση θνησιμότητας ανά χώρα " + (new Date()).getDate() + "/" + ((new Date()).getMonth() + 1) +"/"+ (new Date()).getFullYear(),
              font: {
                size: 20
              }
            },
            xaxis: {
              tickangle: -45
            },
            yaxis: {
              title: ' Ποσοστό θνησιμότητας (%) '
            },
            images: [{
              name: 'watermark_1',
              source: "../logo.png",
              xref: "paper",
              yref: "paper",
              x: 0.4,//0.4
              y: 1.0,//0.9
              sizex: 0.7,//0.7
              sizey: 0.7,//0.7
              // sizing: "stretch",
              opacity: 0.05,
              layer: "below"
            }]
      };

      Plotly.newPlot('compPlot4', data, layout);

      greece_ratio =  (virusData["GR"].total_recovered *100 / virusData["GR"].total_cases);
      usa_ratio = (virusData["US"].total_recovered *100 / virusData["US"].total_cases);
      germany_ratio = (virusData["DE"].total_recovered *100 / virusData["DE"].total_cases);
      spain_ratio = (virusData["ES"].total_recovered *100 / virusData["ES"].total_cases);
      italy_ratio = (virusData["IT"].total_recovered *100 / virusData["IT"].total_cases);
      france_ratio = (virusData["FR"].total_recovered *100 / virusData["FR"].total_cases);
      uk_ratio = (virusData["GB"].total_recovered *100 / virusData["GB"].total_cases);
      russia_ratio = (virusData["RU"].total_recovered *100 / virusData["RU"].total_cases);
      cz_ratio = (virusData["CZ"].total_recovered *100 / virusData["CZ"].total_cases);
      romania_ratio = (virusData["RO"].total_recovered *100 / virusData["RO"].total_cases);
      ukraine_ratio = (virusData["UA"].total_recovered *100 / virusData["UA"].total_cases);
      poland_ratio = (virusData["PL"].total_recovered *100 / virusData["PL"].total_cases);

      var data = [
          {
            x: [greece_expenditure,usa_expenditure,germany_expenditure,italy_expenditure,france_expenditure,uk_expenditure,russia_expenditure,cz_expenditure,romania_expenditure,ukraine_expenditure,poland_expenditure],
            y: [greece_ratio,usa_ratio,germany_ratio,italy_ratio,france_ratio,uk_ratio,russia_ratio,cz_ratio,romania_ratio,ukraine_ratio,poland_ratio],
            //y: [1/greece_ratio,1/usa_ratio,1/germany_ratio,1/italy_ratio,1/france_ratio,1/uk_ratio,1/russia_ratio,1/cz_ratio,1/romania_ratio,1/ukraine_ratio,1/poland_ratio],
            mode: 'markers+text',
            type: 'scatter',
            textposition: 'auto',
            hoverinfo: 'none',
            text: ['Ελλάδα','ΗΠΑ','Γερμανία','Ιταλία','Γαλλία','Αγγλία','Ρωσία','Τσεχία','Ρουμανία','Ουκρανία','Πολωνία'],
            textposition: 'top center',
            marker: { size: 20 }
          }

        ];
      var layout = {
            width: $("#contentDiv").innerWidth()-15,
            height: 600,
            margin: {
              l: 50,
              r: 50,
              b: 80,
              t: 100,
              pad: 4
            },
            title: {
              text: "Απόδοση υγειονομικού συστήματος ανά χώρα "  + (new Date()).getDate() + "/" + ((new Date()).getMonth() + 1) +"/"+ (new Date()).getFullYear(),
              font: {
                size: 20
              }
            },
            xaxis: {
              title: 'Κατά κεφαλή δαπάνες για την υγεία (2016)'
            },
            yaxis: {
              title: 'Ποσοστό ίασης (%)'
            },
            images: [{
              name: 'watermark_1',
              source: "../logo.png",
              xref: "paper",
              yref: "paper",
              x: 0.4,//0.4
              y: 0.8,//0.9
              sizex: 0.7,//0.7
              sizey: 0.7,//0.7
              // sizing: "stretch",
              opacity: 0.05,
              layer: "below"
            }]
      };

      Plotly.newPlot('compPlot5', data, layout);
      //
      // t_data = [];
      // var gr = 0;
      // for (key in virusData) {
      //   if (virusData.hasOwnProperty(key)){
      //     if(key=="GR"){
      //       gr = parseInt(virusData[key].total_cases_per_mil, 10);
      //     }
      //     if(parseInt(virusData[key].total_cases_per_mil, 10)!=-99999){
      //       t_data.push(parseInt(virusData[key].total_cases_per_mil, 10));
      //     }
      //   }
      // }
      //
      // var status;
      // if( gr < getMean(t_data) ) {
      //   status = ("Η Ελλάδα είναι κάτω από το μέσο όρο");
      // } else { status = ("Η Ελλάδα είναι πάνω από το μέσο όρο"); }
      //
      // var trace = {
      //     x: t_data,
      //     type: 'histogram',
      //     histnorm: 'percent',
      //     /*xbins: {'end':10000, 'size':2000, 'start': 0}*/
      //   };
      // var data = [trace];
      // var layout = {
      //     log_y: true,
      //     width: window.innerWidth-250,
      //     height: 500,
      //     margin: {
      //       l: 50,
      //       r: 50,
      //       b: 50,
      //       t: 80,
      //       pad: 4
      //     },
      //     //barmode: 'stack',
      //     title: {
      //       text: "Ιστόγραμμα κρουσμάτων των χωρών " + (new Date()).getDate() + "/" + ((new Date()).getMonth() + 1) +"/"+ (new Date()).getFullYear(),
      //       font: {
      //         size: 20
      //       }
      //     },
      //     annotations: [{
      //       text: "Μέση τιμή: "  + getMean(t_data).toFixed(2) + "<br>Διάμεσος: " + median(t_data).toFixed(2) + "<br>Τυπική απόκλιση: " + getSD(t_data).toFixed(2) + "<br>" + status,
      //         font: {
      //         size: 13,
      //         color: 'rgb(116, 101, 130)',
      //       },
      //       showarrow: false,
      //       align: 'center',
      //       x: 0.5,
      //       y: 1,
      //       xref: 'paper',
      //       yref: 'paper',
      //     }],
      //     xaxis: {
      //       title: 'Κρούσματα ανά 1,000,000 πληθυσμού'
      //     },
      //     yaxis: {
      //       title: 'Ποσοστό (%)'
      //     },
      //     images: [{
      //       name: 'watermark_1',
      //       source: "../logo.png",
      //       xref: "paper",
      //       yref: "paper",
      //       x: 0.4,//0.4
      //       y: 0.8,//0.9
      //       sizex: 0.7,//0.7
      //       sizey: 0.7,//0.7
      //       // sizing: "stretch",
      //       opacity: 0.05,
      //       layer: "below"
      //     }],
      //     legend: {
      //       x: 0,
      //       xanchor: 'left',
      //       y: 1
      //     }
      // };
      // Plotly.newPlot('plot3', data, layout);
      //
      // weekly_data1=weeklyGR1();
      // weekly_data2=weeklyGR2();
      // static__clinical_data1=[5,15,40,92,139,158,148,147,102,93,50,35,28,18,10,5,4,1,2,2,1]; //lab only
      // static_data1=[32,49,45,52,72,62,92,81,63,49,39,40,28,22,9,10,7,5,12,2,3];
      // error = [13,20,15,14,15,25,28,19,17,12,14,11,9,8,5,5,4,4,5,2,2];
      // static_data2=[0,3,3,14,19,17,17,17,20,8,3,5,3,5,6,4,1,4,2,2]; //deaths proved only
      //
      // var data = [
      //   {
      //     y: weekly_data1,
      //     name: 'COVID-19 cases',
      //     type: 'bar'
      //   },
      //   {
      //     y: static_data1.map(x => (x*10434536) /1000),
      //     name: 'Common Infuenza cases',
      //     type: 'bar',
      //     error_y: {
      //       type: 'data',
      //       array: error.map(x => (x*10434536) /1000),
      //       visible: true
      //     }
      //   },
      //   {
      //     y: weekly_data2,
      //     name: 'COVID-19 deaths',
      //     type: 'bar',
      //     xaxis: 'x2',
      //     yaxis: 'y2'
      //   },
      //   {
      //     y: static_data2,
      //     name: 'Common Infuenza deaths',
      //     type: 'bar',
      //     error_y: {
      //       type: 'data',
      //       array: static_data2.map(x => x * 6.96), // calculate actual ... 696% more error
      //       arrayminus: static_data2.map(x => x * 0),
      //       visible: true
      //     },
      //     xaxis: 'x2',
      //     yaxis: 'y2'
      //   }
      // ];
      // var layout = {
      //     width: window.innerWidth-250,
      //     height: 600,
      //     margin: {
      //       l: 50,
      //       r: 50,
      //       b: 50,
      //       t: 230,
      //       pad: 4
      //     },
      //     //barmode: 'stack',
      //     title: {
      //       text: "Σύγκριση κορονοϊού (2020) με κοινή γρίπη (2019) "  + (new Date()).getDate() + "/" + ((new Date()).getMonth() + 1) +"/"+ (new Date()).getFullYear()+"",
      //       font: {
      //         size: 20
      //       }
      //     },
      //     xaxis: {
      //       title: 'Εβδομάδα'
      //     },
      //     xaxis2: {
      //       title: 'Εβδομάδα'
      //     },
      //     yaxis:  {
      //       title: 'Αρθιμός ανθρώπων',
      //       //range: [0, 2000000]
      //     },
      //     yaxis2:  {
      //       title: 'Αρθιμός ανθρώπων',
      //       //range: [0, 300]
      //     },
      //     images: [{
      //       name: 'watermark_1',
      //       source: "../logo.png",
      //       xref: "paper",
      //       yref: "paper",
      //       x: 0.4,//0.4
      //       y: 0.8,//0.9
      //       sizex: 0.7,//0.7
      //       sizey: 0.7,//0.7
      //       // sizing: "stretch",
      //       opacity: 0.05,
      //       layer: "below"
      //     }],
      //     legend: {
      //       x: 0,
      //       xanchor: 'left',
      //       y: 1
      //     },
      //     annotations: [{
      //       text: "Αριστερά: Εβδομαδιαία εκτίμηση αριθμού κρουσμάτων γριπώδους συνδρομής (με ενσωμάτωση σφάλματος*) έναντι κρουσμάτων COVID-19<br>Δεξιά: Αριθμός θανάτων (σε ΜΕΘ & εκτός ΜΕΘ) ανά εβδομάδα, σε ασθενείς με εργαστηριακά επιβεβαιωμένη γρίπη (με ενσωμάτωση σφάλματος**) έναντι αριθμού θανάτων ανά εβδομάδα λόγω COVID-19<br><br>*Το σφάλμα προσδιορίζεται από την ετήσια έκθεση του ΕΟΔΥ<br>**Το σφάλμα προσδιορίζεται ως εξής: 1071 εκτιμώμενοι θάνατοι / 154 θάνατοι από εργαστηριακά επιβεβαιωμένη γρίπη = 696% προσαύξηση σφάλματος",
      //         font: {
      //         size: 13,
      //         color: 'rgb(116, 101, 130)'
      //       },
      //       showarrow: false,
      //       align: 'center',
      //       x: 0.5,
      //       //y: 1,
      //
      //       y: 1,
      //       yanchor: 'bottom',
      //
      //       xref: 'paper',
      //       yref: 'paper',
      //     }],
      //     grid: {rows: 1, columns: 2, pattern: 'independent'}
      // };
      //
      // Plotly.newPlot('plot4', data, layout, {staticPlot: false});
      //
      // var frames = [];
      //
      //
      // weekly_data = [];
      // total_data = [];
      // dates = [];
      //
      // //init array
      // for(var i=0; i<y_cases.length; i++){
      //   weekly_data.push(0);
      //   total_data.push(0);
      //   dates.push(x_total[i]);
      // }
      // //moving avg
      // for(var i=0; i<weekly_data.length; i++){
      //   //alert(weekly_data[i]);
      //   /*f(i%7==0){
      //     weekly_data[i]=y_cases[i];
      //   } else {
      //     weekly_data[i]=weekly_data[i-1]+y_cases[i];
      //   }*/
      //   for(var d=0; d<4; d++){
      //     weekly_data[i] += y_cases[i+3-d];
      //     total_data[i] += y_total[i+3-d];
      //   }
      //   for(var d=0; d<3; d++){
      //     weekly_data[i] += y_cases[i+d-3];
      //     total_data[i] += y_total[i+d-3];
      //   }
      //   weekly_data[i] = parseInt(weekly_data[i]/7,10);
      //   total_data[i] = parseInt(total_data[i]/7,10);
      // }
      //
      // // LLS (for linear fitting)
      // var s1 =0;
      // var s2 =0;
      // var s3 =0;
      // var s4 =0;
      // var n =total_data.length-7;
      //  //for (var i=3; i<total_data.length-4; i++){alert(total_data[i]);}
      //  for (var i=3;i<total_data.length-4; i++){
      //    //if(!isNaN(total_data[i]) && !isNaN(weekly_data[i])){
      //      s1 += (total_data[i]*weekly_data[i]);
      //      s2 += total_data[i];
      //      s3 += weekly_data[i];
      //      s4 += Math.pow(total_data[i],2);
      //    //}
      //  }
      //  m = ( (n*s1) - (s2*s3) ) / (n*s4 - Math.pow(s2,2)) ; // m slope
      //  c = weekly_data[10]-m*total_data[10]; //y-intercept
      //  //y = m*x+c
      //
      //  // or use the following for min-max linear fitting
      //  //m=0.071; // hardcoded solved for min max (for linear fitting)
      //  //c=4;     // hardcoded solved for min max (for linear fitting)
      //
      //  // LLS end
      //
      //  // RMSE LLS
      //  var rmse = 0
      //  for (var i=3; i<n-4; i++){
      //    var y_pred = c + m * total_data[i];
      //    rmse += Math.pow((weekly_data[i] - y_pred),2);
      //  }
      //  rmse = Math.sqrt(rmse/n);
      //
      //  // LLS exp (for log-log fitting) based on https://archive.lib.msu.edu/crcmath/math/math/l/l144.htm
      //  s1=0;
      //  s2=0;
      //  s3=0;
      //  s4=0;
      //  var n =total_data.length-7;
      //   //for (var i=3; i<total_data.length-4; i++){alert(total_data[i]);}
      // for (var i=3;i<total_data.length-4; i++){
      //   s1 += Math.log(total_data[i]) * Math.log(weekly_data[i]);
      //   s2 += Math.log(total_data[i]);
      //   s3 += Math.log(weekly_data[i]);
      //   s4 += Math.pow(Math.log(total_data[i]),2);
      // }
      // b=((n*s1)-(s2*s3))/((n*s4)-Math.pow(s2,2));
      // a=(s3-b*s2)/n;
      // // LLS exp end
      //
      // // RMSE LLS exp
      // var rmse = 0
      // for (var i=3; i<n-4; i++){
      //   var y_pred = Math.exp(a)*Math.pow(total_data[i],b)
      //   rmse += Math.pow((weekly_data[i] - y_pred),2);
      // }
      // rmse = Math.sqrt(rmse/n);
      //
      //  m=Math.log(93)/Math.log(247.6);  // hardcoded min - max fitting (for log-log) based on http://mathforum.org/library/drmath/view/69930.html
      //  c=1/Math.pow(5,m);               // hardcoded min - max fitting (for log-log) based on http://mathforum.org/library/drmath/view/69930.html
      //
      //  // create the reference line (based on)
      //  var linex =[];
      //  var liney =[];
      //  var n = y_total.length;
      //  for (var i = 0; i < n; i++) {
      //    liney.push(Math.exp(a)*Math.pow(total_data[i],b));    //LLS exp (for log-log fitting)
      //    //liney.push(c*Math.pow(total_data[i],m));              // min-max fitting (for log-log)
      //    //liney.push(m*total_data[i]+c);                         // LLS (for linear fitting)
      //
      //    linex.push(total_data[i]);           // this is common for all 3 cases
      //  }
      //
      //  var n = y_total.length;
      //  for (var i = 0; i < n; i++) {
      //   frames[i] = {data: [{x: [], y: [], text: []},{x: [], y: [], text: []}]}
      //
      //   frames[i].data[0].x = total_data.slice(0, i+1);
      //   frames[i].data[0].y = weekly_data.slice(0, i+1);
      //   frames[i].data[0].text = dates.slice(0, i+1);
      //
      //   frames[i].data[1].x = linex.slice(0, i+1);
      //   frames[i].data[1].y = liney.slice(0, i+1);
      //  }
      //  var trace1 = {
      //   type: "scatter",
      //   mode: "lines",
      //   name: 'Greece',
      //   //fill: 'tozeroy',
      //   //fill: 'tonexty',
      //   x: frames[0].data[0].x,
      //   y: frames[0].data[0].y,
      //   //text: frames[1].data[0].text,
      //   line: {color: 'grey'}
      //  };
      //  var trace2 = {
      //   type: 'scatter',
      //   mode: "lines",
      //   name: 'Linear Least Square Fitting (log-log)',
      //   fill: 'tonexty',
      //   x: frames[0].data[1].x,
      //   y: frames[0].data[1].y,
      //   //text: frames[1].data[0].text,
      //   line: {color: 'red'}
      //  };
      //  /*var trace2 = {
      //   type: "scatter",
      //   mode: "lines",
      //   name: 'AAPL High',
      //   x: table[0],
      //   y: table[1],
      //   //text: frames[1].data[0].text,
      //   line: {color: 'red'}
      // };*/
      //  var data = [trace1, trace2];
      //
      //  var layout = {
      //   title: 'Σύγκριση εβδομαδιαίων κρουσμάτων έναντι του συνόλου (Κλικ στο έναρξη!)',
      //   font: {
      //     size: 14
      //   },
      //   margin: { t: 150, r: 55, l: 55, b: 50 },
      //   height: 600,
      //   width: 1100,
      //   xaxis: {
      //     title: 'Κινούμενος εβδομαδιαίος μέσος όρος συνολικών κρουσμάτων',
      //     //type: 'log',
      //     //range: [0,4]
      //     range: [0, virusData["GR"].total_cases]
      //     //autorange: true
      //     //range: [frames[n-1].data[0].x[0],
      //     //      frames[n-1].data[0].x[n-1]],
      //     //      type: 'lol'
      //   },
      //   yaxis: {
      //     //range: [-1,2],
      //     title: 'Κινούμενος εβδομαδιαίος μέσος όρος νέων κρουσμάτων',
      //     range: [0,120],
      //     //type: 'log',
      //     //autorange: true
      //   },
      //   annotations: [{
      //     text: "RMSE: "+rmse.toFixed(2)+"Rate: "+m,
      //       font: {
      //       size: 13,
      //       color: 'rgb(116, 101, 130)',
      //     },
      //     showarrow: false,
      //     align: 'center',
      //     x: 0.5,
      //     y: 1,
      //     xref: 'paper',
      //     yref: 'paper',
      //   }],
      //   //hovermode: 'closest',
      //   images: [{
      //     name: 'watermark_1',
      //     source: "../logo.png",
      //     xref: "paper",
      //     yref: "paper",
      //     x: 0.4,//0.4
      //     y: 0.8,//0.9
      //     sizex: 0.7,//0.7
      //     sizey: 0.7,//0.7
      //     // sizing: "stretch",
      //     opacity: 0.05,
      //     layer: "below"
      //   }],
      //   legend: {
      //     orientation: 'h',
      //     x: 0.5,
      //     y: 1.2,
      //     xanchor: 'center'
      //   },
      //   updatemenus: [
      //     {
      //       buttons: [{
      //       method: "animate",
      //       args: [null, {
      //         fromcurrent: true,
      //         transition: {
      //           duration: 0,
      //         },
      //         frame: {
      //           duration: 100,
      //           redraw: false
      //         }
      //       }],
      //       label: "Έναρξη"
      //     }, {
      //       method: "animate",
      //       args: [
      //         [null],
      //         {
      //           mode: "immediate",
      //           transition: {
      //             duration: 0
      //           },
      //           frame: {
      //             duration: 0,
      //             redraw: false
      //           }
      //         }
      //       ],
      //       label: "Παύση"
      //     }],
      //       x: 0.5,
      //       y: 0,
      //       yanchor: "top",
      //       xanchor: "center",
      //       showactive: false,
      //       direction: "left",
      //       type: "buttons",
      //       pad: {"t": 87, "r": 10},
      //     },
      //     {
      //     buttons: [{
      //         args: [{'visible': [true, true]},
      //                      {'title': 'Σύγκριση εβδομαδιαίων κρουσμάτων έναντι του συνόλου (Γραμμική κλίμακα)',
      //                       'xaxis': {'type': 'linear'},
      //                       'yaxis': {'type': 'linear'}
      //                     }
      //                     ],
      //         //args: ['type', 'linear'],
      //         label:'Linear',
      //         method:'update'
      //     },
      //     {
      //         args: [{'visible': [true, true]},
      //                      {'title': 'Σύγκριση εβδομαδιαίων κρουσμάτων έναντι του συνόλου (Λογαριθμική κλίμακα)',
      //                       'xaxis': {'type': 'log'},
      //                       'yaxis': {'type': 'log'}
      //                     }
      //                     ],
      //         //args: ['type', 'log'],
      //         label: 'Log',
      //         method: 'update'
      //     }],
      //     direction: 'down',
      //         pad: {'r': 10, 't': 10},
      //         showactive: true,
      //         type: 'dropdown',
      //         x: 0.78,
      //         xanchor: 'left',
      //         y: 1.2,
      //         yanchor: 'top'
      //
      //     }]
      //  };
      //
      //  Plotly.newPlot('greeceTrend', data, layout).then(function() {
      //   Plotly.addFrames('greeceTrend', frames);
      // });


      population_cont = [747636026, 4641054775, 1340598147, 592072212, 430759766, 42677813];
      total_cases_cont = [continentalData["Europe"].total_cases, continentalData["Asia"].total_cases, continentalData["Africa"].total_cases, continentalData["North America"].total_cases, continentalData["South America"].total_cases, continentalData["Oceania"].total_cases];
      recovered_cont = [continentalData["Europe"].total_recovered, continentalData["Asia"].total_recovered, continentalData["Africa"].total_recovered, continentalData["North America"].total_recovered, continentalData["South America"].total_recovered, continentalData["Oceania"].total_recovered];
      deaths_cont = [continentalData["Europe"].total_deaths, continentalData["Asia"].total_deaths, continentalData["Africa"].total_deaths, continentalData["North America"].total_deaths, continentalData["South America"].total_deaths, continentalData["Oceania"].total_deaths];
      total = [0,0,0,0];
      for(var i=0; i<6; i++){
        total[0]=total[0]+population_cont[i];
        total[1]=total[1]+total_cases_cont[i];
        total[2]=total[2]+recovered_cont[i];
        total[3]=total[3]+deaths_cont[i];

      }

      for(var i=0; i<6; i++){
        var a = 'a'+(i+1);
        var b = 'b'+(i+1);
        var c = 'c'+(i+1);
        document.getElementById(a).innerHTML = ""+(population_cont[i]/total_cases_cont[i]).toFixed();
        document.getElementById(b).innerHTML = ""+(total_cases_cont[i]/recovered_cont[i]).toFixed();
        document.getElementById(c).innerHTML = ""+(total_cases_cont[i]/deaths_cont[i]).toFixed();
      }

      var trace1 = {
        x: ['Europe', 'Asia', 'Africa', 'N. America', 'S. America', 'Oceania'],
        y: [(total_cases_cont[0]).toFixed(), (total_cases_cont[1]).toFixed(), (total_cases_cont[2]).toFixed(), (total_cases_cont[3]).toFixed(), (total_cases_cont[4]).toFixed(), (total_cases_cont[5]).toFixed()],
        marker:{
          color: '#31708e'
        //  color: ['rgba(204,204,204,1)', 'rgba(204,204,204,1)', 'rgba(204,204,204,1)', 'rgba(204,204,204,1)', 'rgba(204,204,204,1)', 'rgba(204,204,204,1)']
        },
        name: "Total cases",
        type: 'bar'
      };
      var trace2 = {
        x: ['Europe', 'Asia', 'Africa', 'N. America', 'S. America', 'Oceania'],
        y: [(recovered_cont[0]).toFixed(), (recovered_cont[1]).toFixed(), (recovered_cont[2]).toFixed(), (recovered_cont[3]).toFixed(), (recovered_cont[4]).toFixed(), (recovered_cont[5]).toFixed()],
        marker:{
          color: '#8fc1e3'
        //  color: ['rgba(222,45,38,0.8)', 'rgba(222,45,38,0.8)', 'rgba(222,45,38,0.8)', 'rgba(222,45,38,0.8)', 'rgba(222,45,38,0.8)', 'rgba(222,45,38,0.8)']
        },
        name: "Recoveries",
        type: 'bar'
      };
      var trace3 = {
        x: ['Europe', 'Asia', 'Africa', 'N. America', 'S. America', 'Oceania'],
        y: [(deaths_cont[0]).toFixed(), (deaths_cont[1]).toFixed(), (deaths_cont[2]).toFixed(), (deaths_cont[3]).toFixed(), (deaths_cont[4]).toFixed(), (deaths_cont[5]).toFixed()],
        marker:{
          color: '#844d36'
        //  color: ['rgba(204,11,22,1)', 'rgba(204,11,22,1)', 'rgba(204,11,22,1)', 'rgba(204,11,22,1)', 'rgba(204,11,22,1)', 'rgba(204,11,22,1)']
        },
        name: "Deaths",
        type: 'bar'
      };

      var data = [trace1, trace2, trace3];

      var layout = {
        title: 'COVID-19 Σύγκριση δεδομένων ανά ήπειρο',
        barmode: 'stack',
        height: 500,
        width: 1150,
        images: [{
          name: 'watermark_1',
          source: "../logo.png",
          xref: "paper",
          yref: "paper",
          x: 0.4,//0.4
          y: 0.8,//0.9
          sizex: 0.7,//0.7
          sizey: 0.7,//0.7
          // sizing: "stretch",
          opacity: 0.05,
          layer: "below"
        }]
      };

      Plotly.newPlot('bar1', data, layout);

      var data = [{
          values:  population_cont.map(x => x * 100 / total[0]),
          labels: ['Europe', 'Asia', 'Africa', 'N. America', 'S. America', 'Oceania'],
          text: 'Population',
          domain: {column: 0},
          name: 'Population share',
          hoverinfo: 'label+percent+name',
          //hole: .4,
          type: 'pie'
        },
        {
          values: total_cases_cont.map(x => x * 100 / total[1]),
          labels: ['Europe', 'Asia', 'Africa', 'N. America', 'S. America', 'Oceania'],
          text: 'Total Cases',
          textposition: 'inside',
          domain: {column: 1},
          name: 'Covid19 cases share',
          hoverinfo: 'label+percent+name',
          //hole: .4,
          type: 'pie'
        },
        {
          values: recovered_cont.map(x => x * 100 / total[2]),
          labels: ['Europe', 'Asia', 'Africa', 'N. America', 'S. America', 'Oceania'],
          text: 'Total Recoveries',
          textposition: 'inside',
          domain: {column: 2},
          name: 'Covid19 recoveries share',
          hoverinfo: 'label+percent+name',
          //hole: .4,
          type: 'pie'
        },
        {
          values: deaths_cont.map(x => x * 100 / total[3]),
          labels: ['Europe', 'Asia', 'Africa', 'N. America', 'S. America', 'Oceania'],
          text: 'Total Deaths',
          textposition: 'inside',
          domain: {column: 3},
          name: 'Covid19 deaths share',
          hoverinfo: 'label+percent+name',
          //hole: .4,
          type: 'pie'
        }
      ];

      var layout = {
        title: 'COVID-19 Ποσοστιαίο μοίρασμα δεδομένων ανά ήπειρο',
        annotations: [
          {
            font: {
              size: 15
            },
            showarrow: false,
            text: 'POPULATION',
            x: 0.065,
            y: 1
          },
          {
            font: {
              size: 15
            },
            showarrow: false,
            text: 'CASES',
            x: 0.37,
            y: 1
          },
          {
            font: {
              size: 15
            },
            showarrow: false,
            text: 'RECOVERED',
            x: 0.63,
            y: 1
          },
          {
            font: {
              size: 15
            },
            showarrow: false,
            text: 'DEATHS',
            x: 0.92,
            y: 1
          }
        ],
        images: [{
          name: 'watermark_1',
          source: "../logo.png",
          xref: "paper",
          yref: "paper",
          x: 0.4,//0.4
          y: 0.8,//0.9
          sizex: 0.7,//0.7
          sizey: 0.7,//0.7
          // sizing: "stretch",
          opacity: 0.05,
          layer: "below"
        }],
        height: 500,
        width: 1150,
        showlegend: true,
        grid: {rows: 1, columns: 4}
      };

      Plotly.newPlot('pie1', data, layout);


      greece_ratio =  (virusData["GR"].total_tests *100 / greek_pop);
      usa_ratio = (virusData["US"].total_tests *100 / usa_pop);
      germany_ratio = (virusData["DE"].total_tests *100 / germ_pop);
      spain_ratio = (virusData["ES"].total_tests *100 / spain_pop);
      italy_ratio = (virusData["IT"].total_tests *100 / italy_pop);
      france_ratio = (virusData["FR"].total_tests *100 / france_pop);
      uk_ratio = (virusData["GB"].total_tests *100 / uk_pop);
      russia_ratio = (virusData["RU"].total_tests *100 / russia_pop);
      cz_ratio = (virusData["CZ"].total_tests *100 / cz_pop);
      romania_ratio = (virusData["RO"].total_tests *100 / romania_pop);
      ukraine_ratio = (virusData["UA"].total_tests *100 / ukraine_pop);
      poland_ratio = (virusData["PL"].total_tests *100 / poland_pop);

      var data = [
          {
            x: [greece_ratio,usa_ratio,germany_ratio,italy_ratio,france_ratio,uk_ratio,russia_ratio,cz_ratio,romania_ratio,ukraine_ratio,poland_ratio],
            y: ['Ελλάδα','ΗΠΑ','Γερμανία','Ιταλία','Γαλλία','Αγγλία','Ρωσία','Τσεχία','Ρουμανία','Ουκρανία','Πολωνία'],
            //y: [1/greece_ratio,1/usa_ratio,1/germany_ratio,1/italy_ratio,1/france_ratio,1/uk_ratio,1/russia_ratio,1/cz_ratio,1/romania_ratio,1/ukraine_ratio,1/poland_ratio],
            transforms: [{
                type: 'sort',
                target: 'x',
                order: 'ascending'
              }],
            type: 'bar',
            orientation: 'h',
            textposition: 'auto',
            //hoverinfo: 'none',
            text: ['Ελλάδα','ΗΠΑ','Γερμανία','Ιταλία','Γαλλία','Αγγλία','Ρωσία','Τσεχία','Ρουμανία','Ουκρανία','Πολωνία'],
            textposition: 'top center',
            //marker: { size: 20 }
          }

        ];
      var layout = {
            width: window.innerWidth-250,
            height: 600,
            margin: {
              l: 100,
              r: 50,
              b: 80,
              t: 100,
              pad: 4
            },
            title: {
              text: "ΤΕΣΤ ανά πληθυσμό "  + (new Date()).getDate() + "/" + ((new Date()).getMonth() + 1) +"/"+ (new Date()).getFullYear(),
              font: {
                size: 20
              }
            },
            xaxis: {
              title: 'Ποσοστό (%)'
            },
            yaxis: {
              //title: 'Χώρες'
            },
            images: [{
              name: 'watermark_1',
              source: "../logo.png",
              xref: "paper",
              yref: "paper",
              x: 0.4,//0.4
              y: 0.8,//0.9
              sizex: 0.7,//0.7
              sizey: 0.7,//0.7
              // sizing: "stretch",
              opacity: 0.05,
              layer: "below"
            }]
      };

      Plotly.newPlot('plot_tests', data, layout);

      document.getElementById('load').style.display = "none";
      document.getElementById('cont-data').style.display = "block";
    }

    $(window).resize(function() {

        $('#daily-plots').css('height', window.innerHeight-38);
        $('#daily-plots').css('width', $("#contentDiv").innerWidth()-15);

        Plotly.relayout('compPlot4', {
          width:  $("#contentDiv").innerWidth()-15
          //height:  window.innerHeight-50
        })
        Plotly.relayout('compPlot5', {
          width:  $("#contentDiv").innerWidth()-15
          //height:  window.innerHeight-50
        })

        // Plotly.relayout('plot3', {
        //   width:  $("#contentDiv").innerWidth()-15,
        //   //height:  window.innerHeight-50
        // })
        // Plotly.relayout('plot4', {
        //   width:  $("#contentDiv").innerWidth()-15,
        //   //height:  window.innerHeight-50
        // })
        Plotly.relayout('pie1', {
         width:  $("#contentDiv").innerWidth()-15
         //height:  window.innerHeight-50
        })
        Plotly.relayout('bar1', {
         width:  $("#contentDiv").innerWidth()-15
         //height:  window.innerHeight-50
        })

        // Plotly.relayout('greeceTrend', {
        //  width:  window.innerWidth-$(".tab").innerWidth()-15,
        //  //height:  window.innerHeight-50
        // })
        Plotly.relayout('plot_tests', {
         width:  $("#contentDiv").innerWidth()-15
         //height:  window.innerHeight-50
        })

    });

  </script>
</body>
</html>
